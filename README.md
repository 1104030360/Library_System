# ä¸­å¤§åœ–æ›¸é¤¨å€Ÿé‚„ç³»çµ±

é€™æ˜¯ä¸€å€‹åœ–æ›¸é¤¨ç®¡ç†ç³»çµ±ï¼Œå¾ž Swing æ¡Œé¢æ‡‰ç”¨ç¨‹å¼æ¼”é€²ç‚ºæŽ¡ç”¨ RESTful API å’Œ SQLite è³‡æ–™åº«çš„ç¾ä»£ Web æ‡‰ç”¨ç¨‹å¼ã€‚æ­¤å°ˆæ¡ˆç‚ºä¸­å¤®å¤§å­¸è³‡ç®¡ç³»æœŸæœ«å°ˆé¡Œã€‚

**æœ€æ–°ç‰ˆæœ¬æŽ¡ç”¨ Vue 3 + Vite + TypeScript æž¶æ§‹ï¼Œæä¾›ç¾ä»£åŒ–çš„ä½¿ç”¨è€…é«”é©—ã€‚**

---

## ç³»çµ±ç°¡ä»‹

### æ ¸å¿ƒåŠŸèƒ½
- **Vue 3 ç¾ä»£å‰ç«¯**: æŽ¡ç”¨ Vue 3 + Naive UI + Tailwind CSS æ§‹å»º
- **Web-based UI**: è·¨å¹³å°å­˜å–ï¼Œæ”¯æ´ä»»ä½•ç€è¦½å™¨
- **SQLite è³‡æ–™åº«**: æŒä¹…åŒ–è³‡æ–™å„²å­˜
- **Cookie-based èªè­‰**: å®‰å…¨çš„ Session ç®¡ç†
- **å³æ™‚æœå°‹æŽ’åº**: Client-side å³æ™‚éŽæ¿¾
- **å®Œæ•´æ¸¬è©¦è¦†è“‹**: ä½¿ç”¨ JUnit 5 æ¸¬è©¦æ¡†æž¶

### è¨­è¨ˆç†å¿µ
- **æ¥µç°¡ä¸»ç¾©**: æŽ¡ç”¨ 2025 æ¥µç°¡è¨­è¨ˆè¶¨å‹¢
- **TypeScript**: å®Œæ•´çš„é¡žåž‹å®‰å…¨
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**: æ”¯æ´æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢

---

## å¿«é€Ÿé–‹å§‹

### ðŸš€ æ–¹æ³• 1: Docker ä¸€éµéƒ¨ç½² (æŽ¨è–¦) â­ **New**

**é©ç”¨å ´æ™¯**: ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²ã€å®Œæ•´ç³»çµ±æ¸¬è©¦ã€åŒ…å« AI æŽ¨è–¦åŠŸèƒ½

```bash
# ä¸€éµå•Ÿå‹•æ‰€æœ‰æœå‹™ (4 å€‹å®¹å™¨)
docker-compose up -d

# æª¢æŸ¥æœå‹™ç‹€æ…‹
docker-compose ps

# æŸ¥çœ‹æ—¥èªŒ
docker-compose logs -f
```

**è¨ªå•æœå‹™:**
- **Vue 3 å‰ç«¯**: `http://localhost:80` (æˆ– 8080ï¼Œè¦–ç«¯å£é…ç½®)
- **Backend API**: `http://localhost:7070`
- **AI æŽ¨è–¦æœå‹™**: `http://localhost:8888`
- **Ollama LLM API**: `http://localhost:11434`

**æ¸¬è©¦å¸³è™Ÿ:**
- é¤¨é•· (Boss): `0001` / `1111`
- é¤¨å“¡ (Employee): `0002` / `2222`

**åœæ­¢æœå‹™:**
```bash
docker-compose down
```

**å®Œæ•´ Docker æ–‡ä»¶**: åƒé–± `DOCKER.md` ç²å–è©³ç´°éƒ¨ç½²æŒ‡å—

---

### ðŸ›  æ–¹æ³• 2: æœ¬åœ°é–‹ç™¼æ¨¡å¼ï¼ˆå‚³çµ±å•Ÿå‹•ï¼‰

**é©ç”¨å ´æ™¯**: æœ¬åœ°é–‹ç™¼ã€å‰ç«¯é–‹ç™¼ã€å¿«é€Ÿæ¸¬è©¦

**æ­¥é©Ÿ 1: å•Ÿå‹•å¾Œç«¯ API**

```bash
./start-server.sh
```

å¾Œç«¯å°‡å•Ÿå‹•åœ¨ `http://localhost:7070`

**æ­¥é©Ÿ 2: å•Ÿå‹•å‰ç«¯ Vue 3 æ‡‰ç”¨**

```bash
cd web
npm install          # é¦–æ¬¡åŸ·è¡Œéœ€è¦å®‰è£ä¾è³´
npm run dev
```

å‰ç«¯å°‡å•Ÿå‹•åœ¨ `http://localhost:5173`

**è¨ªå•æ‡‰ç”¨ç¨‹å¼:**
- **Vue 3 å‰ç«¯ (æ–°ç‰ˆ)**: `http://localhost:5173` - ç¾ä»£åŒ–ä»‹é¢ï¼ŒæŽ¡ç”¨ Vue 3 + Naive UI + Tailwind CSS
- **èˆŠç‰ˆå‰ç«¯**: `http://localhost:7070` - å‚³çµ± HTML ä»‹é¢

**æ¸¬è©¦å¸³è™Ÿ:**
- é¤¨é•· (Boss): `0001` / `1111`
- é¤¨å“¡ (Employee): `0002` / `2222`

---

## åŠŸèƒ½

### æ›¸ç±æ¸…å–®
- é¡¯ç¤ºæ‰€æœ‰æ›¸ç± (æ›¸åã€ä½œè€…ã€å‡ºç‰ˆç¤¾ã€ç‹€æ…‹)ã€‚
- å³æ™‚æœå°‹èˆ‡æŽ’åºã€‚
- å€Ÿé–±/æ­¸é‚„æ›¸ç±ã€‚
- é¡¯ç¤ºåœ–æ›¸é¤¨çµ±è¨ˆè³‡è¨Šã€‚

### ç®¡ç†å“¡åŠŸèƒ½ (æ–°å¢ž) â­
- **æ–°å¢žæ›¸ç±**: ç®¡ç†å“¡å¯é€šéŽ Web ä»‹é¢æ–°å¢žæ›¸ç±åˆ°è³‡æ–™åº«
  - å®Œæ•´çš„è¡¨å–®é©—è­‰ (IDã€æ›¸åã€ä½œè€…ã€å‡ºç‰ˆç¤¾)
  - è‡ªå‹•æª¢æŸ¥é‡è¤‡ ID
  - æ¬Šé™æŽ§åˆ¶ï¼šåªæœ‰é¤¨é•·å’Œé¤¨å“¡å¯è¨ªå•
  - è¨ªå•è·¯å¾‘ï¼š`/add-book`

### ç™»å…¥
- åŸºæ–¼ Cookie çš„èº«ä»½é©—è­‰ã€‚
- æ¸¬è©¦å¸³è™Ÿ:
    - é¤¨é•· (Boss): `0001` / `1111`
    - é¤¨å“¡ (Employee): `0002` / `2222`

---

## å°ˆæ¡ˆçµæ§‹

```
JavaProj 2/
â”œâ”€â”€ backend/                    # å¾Œç«¯ç¨‹å¼ç¢¼
â”‚   â”œâ”€â”€ src/                   # åŽŸå§‹ç¢¼
â”‚   â”‚   â”œâ”€â”€ LibraryApiServer.java          # ä¸»ä¼ºæœå™¨ (HTTP handlers)
â”‚   â”‚   â”œâ”€â”€ BookDatabaseRepository.java    # è³‡æ–™åº«å­˜å–å±¤
â”‚   â”‚   â”œâ”€â”€ ApiAuthenticationHelper.java   # èªè­‰æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ ApiSessionManager.java         # Session ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ StaticFileHandler.java         # éœæ…‹æª”æ¡ˆè™•ç†
â”‚   â”‚   â”œâ”€â”€ BookInfo.java                  # è³‡æ–™æ¨¡åž‹
â”‚   â”‚   â”œâ”€â”€ RecommendationService.java     # AI æŽ¨è–¦æœå‹™ â­
â”‚   â”‚   â””â”€â”€ User.java, BookRating.java...  # å…¶ä»–æ¨¡åž‹é¡ž
â”‚   â”œâ”€â”€ ai_service/            # AI æŽ¨è–¦å¾®æœå‹™ (Python Flask) â­
â”‚   â”‚   â”œâ”€â”€ Dockerfile         # AI Service Docker é…ç½®
â”‚   â”‚   â”œâ”€â”€ app.py             # Flask æ‡‰ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ ollama_service.py  # Ollama LLM æ•´åˆ
â”‚   â”‚   â””â”€â”€ requirements.txt   # Python ä¾è³´
â”‚   â”œâ”€â”€ Dockerfile             # Backend Docker é…ç½® â­
â”‚   â””â”€â”€ bin/                   # ç·¨è­¯è¼¸å‡º
â”‚
â”œâ”€â”€ web/                        # å‰ç«¯ç¨‹å¼ç¢¼ (Vue 3 + Vite)
â”‚   â”œâ”€â”€ Dockerfile             # Frontend Docker é…ç½® â­
â”‚   â”œâ”€â”€ nginx.conf             # Nginx é…ç½® â­
â”‚   â”œâ”€â”€ src/                   # Vue 3 æ‡‰ç”¨ç¨‹å¼ç¢¼
â”‚   â”‚   â”œâ”€â”€ api/               # API é€šè¨Šå±¤
â”‚   â”‚   â”œâ”€â”€ components/        # Vue çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AppHeader.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ BookCard.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ BookList.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBar.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsBar.vue
â”‚   â”‚   â”‚   â””â”€â”€ LiquidBackground.vue
â”‚   â”‚   â”œâ”€â”€ router/            # Vue Router è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/            # Pinia ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/             # TypeScript é¡žåž‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ views/             # é é¢çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginView.vue
â”‚   â”‚   â”‚   â””â”€â”€ AddBookView.vue     # æ–°å¢žæ›¸ç±é é¢ (ç®¡ç†å“¡å°ˆç”¨)
â”‚   â”‚   â”œâ”€â”€ App.vue            # æ ¹çµ„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts            # æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ public/                # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ package.json           # NPM ä¾è³´é…ç½®
â”‚   â”œâ”€â”€ vite.config.ts         # Vite é…ç½®
â”‚   â””â”€â”€ tailwind.config.js     # Tailwind CSS é…ç½®
â”‚
â”œâ”€â”€ test/                       # æ¸¬è©¦ç¨‹å¼ç¢¼
â”‚   â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ auth/
â”‚
â”œâ”€â”€ schedule/                   # å°ˆæ¡ˆç®¡ç†æ–‡ä»¶ â­
â”‚   â”œâ”€â”€ plan/                  # é–‹ç™¼è¨ˆåŠƒ
â”‚   â”œâ”€â”€ reports/               # å®Œæˆå ±å‘Š
â”‚   â”‚   â””â”€â”€ 2025-11-02-Dockerå®Œæ•´åŒ–è¨ˆåŠƒæœ€çµ‚å®Œæˆ-REP.md â­
â”‚   â””â”€â”€ todo/                  # å¾…è¾¦äº‹é …
â”‚
â”œâ”€â”€ legacy/                     # èˆŠç‰ˆç¨‹å¼ç¢¼ (å·²æ­¸æª”)
â”‚
â”œâ”€â”€ data/                       # è³‡æ–™å„²å­˜
â”‚   â””â”€â”€ library.db             # SQLite è³‡æ–™åº«
â”‚
â”œâ”€â”€ lib/                        # å¤–éƒ¨å‡½å¼åº«
â”‚
â”œâ”€â”€ docker-compose.yml          # Docker Compose é…ç½® â­
â”œâ”€â”€ DOCKER.md                   # Docker éƒ¨ç½²æŒ‡å— â­
â”œâ”€â”€ start-server.sh             # ä¼ºæœå™¨å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ run-tests.sh                # æ¸¬è©¦åŸ·è¡Œè…³æœ¬
â””â”€â”€ README.md                   # æœ¬æ–‡ä»¶
```

---

## æ¸¬è©¦ç³»çµ±

ä½¿ç”¨ `./run-tests.sh` æŒ‡ä»¤åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ã€‚

æ¸¬è©¦æ¶µè“‹ä¸‰å€‹ä¸»è¦é ˜åŸŸï¼š
1.  **Repository æ¸¬è©¦**: æ¸¬è©¦è³‡æ–™åº«å±¤çš„ CRUD æ“ä½œã€‚
2.  **èªè­‰ç³»çµ±æ¸¬è©¦**: æ¸¬è©¦èº«ä»½é©—è­‰å’Œ Session ç®¡ç†ã€‚
3.  **API æ•´åˆæ¸¬è©¦**: æ¸¬è©¦å®Œæ•´çš„ API å †ç–Šã€‚

è©³ç´°è³‡è¨Šè«‹åƒé–± `test/README.md`ã€‚

---

## API ç«¯é»ž

### æ›¸ç±ç®¡ç†

| Method | Endpoint            | èªªæ˜Ž           | èªè­‰ |
|--------|---------------------|----------------|------|
| GET    | `/api/books`        | å–å¾—æ‰€æœ‰æ›¸ç±   | å¦   |
| GET    | `/api/books?id=001` | å–å¾—ç‰¹å®šæ›¸ç±   | å¦   |
| GET    | `/api/stats`        | å–å¾—çµ±è¨ˆè³‡è¨Š   | å¦   |
| POST   | `/api/books/borrow` | å€Ÿé–±æ›¸ç±       | æ˜¯   |
| POST   | `/api/books/return` | æ­¸é‚„æ›¸ç±       | æ˜¯   |

### èªè­‰ç®¡ç†

| Method | Endpoint           | èªªæ˜Ž                   |
|--------|--------------------|------------------------|
| POST   | `/api/auth/login`  | ç™»å…¥ (å–å¾— session cookie) |
| POST   | `/api/auth/logout` | ç™»å‡º (æ¸…é™¤ session)      |
| GET    | `/api/auth/whoami` | å–å¾—ç•¶å‰ä½¿ç”¨è€…è³‡è¨Š     |

---

## è³‡æ–™åº«çµæ§‹

**`books` è¡¨**

| æ¬„ä½         | é¡žåž‹    | èªªæ˜Ž                     |
|--------------|---------|--------------------------|
| id           | TEXT    | æ›¸ç± ID (Primary Key)    |
| title        | TEXT    | æ›¸å                     |
| author       | TEXT    | ä½œè€…                     |
| publisher    | TEXT    | å‡ºç‰ˆç¤¾                   |
| is_available | INTEGER | æ˜¯å¦å¯å€Ÿ (1=å¯å€Ÿ, 0=å·²å€Ÿå‡º) |

---

## æŠ€è¡“æ£§

### å¾Œç«¯
- **èªžè¨€**: Java
- **HTTP Server**: `com.sun.net.httpserver.HttpServer`
- **è³‡æ–™åº«**: SQLite 3.45.1.0
- **JSON**: Gson 2.10.1
- **æ¸¬è©¦**: JUnit 5.10.1

### å‰ç«¯ (Vue 3 ç‰ˆæœ¬)
- **æ¡†æž¶**: Vue 3.5+ (Composition API)
- **æ§‹å»ºå·¥å…·**: Vite 7.1+
- **UI æ¡†æž¶**: Naive UI 2.x
- **æ¨£å¼**: Tailwind CSS v4
- **ç‹€æ…‹ç®¡ç†**: Pinia 3.0+
- **è·¯ç”±**: Vue Router 4.6+
- **HTTP å®¢æˆ¶ç«¯**: Axios 1.13+
- **èªžè¨€**: TypeScript 5.9+

### å‰ç«¯ (èˆŠç‰ˆ - å‚³çµ± HTML)
- **HTML5**
- **CSS3**
- **JavaScript (ES6+)** (ç„¡æ¡†æž¶)

---

## è²¢ç»

æ­¡è¿Žæäº¤ Issue å’Œ Pull Requestã€‚

### é–‹ç™¼æµç¨‹
1. Fork å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/æ–°åŠŸèƒ½`)
3. æ’°å¯«ç¨‹å¼ç¢¼èˆ‡æ¸¬è©¦
4. åŸ·è¡Œæ¸¬è©¦ (`./run-tests.sh`)
5. Commit (`git commit -m 'Add æ–°åŠŸèƒ½'`)
6. Push (`git push origin feature/æ–°åŠŸèƒ½`)
7. å»ºç«‹ Pull Request

---

## æŽˆæ¬Š

æœ¬å°ˆæ¡ˆç‚ºå­¸ç¿’å°ˆæ¡ˆï¼Œä¸­å¤®å¤§å­¸è³‡ç®¡ç³»æœŸæœ«ä½œæ¥­ã€‚

---

## è‡´è¬

- **ä¸­å¤®å¤§å­¸è³‡ç®¡ç³»** - æä¾›å­¸ç¿’ç’°å¢ƒ
- **Linus Torvalds** - å•Ÿç™¼é–‹ç™¼å“²å­¸

---

## è¯çµ¡æ–¹å¼

- **GitHub**: https://github.com/1104030360
- **å°ˆæ¡ˆé€£çµ**: https://github.com/1104030360/JavaProj-2

---

> "Talk is cheap. Show me the code." - Linus Torvalds
